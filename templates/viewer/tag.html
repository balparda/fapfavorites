<!DOCTYPE html>
<html lang='en-US'>
  <head>
    <meta charset='utf-8'/>
    <title>
      Imagefap-Favorites: {% if tag_id %}Tag {{ tag_name|escape }}{% else %}Root Tags{% endif %}
    </title>
    <style>

      th, td {padding: 5px;}

    </style>
  </head>
  <body bgcolor='black' text='lightgray'>

    <h1>
      {% if tag_id %}
        Tag <i>&quot;{{ tag_name|escape }}&quot;</i>
      {% else %}
        Root Tags
      {% endif %}
    </h1>

    {% if error_message %}
      <p style='color: red;'><strong>{{ error_message }}</strong></p>
      <p>&nbsp;</p>
    {% endif %}

    <table border='2'>
      {% if tag_id %}
        <tr>
          <th colspan='3'>Sub-Tags of <i>&quot;{{ tag_name|escape }}&quot;</i></th>
        </tr>
      {% endif %}
      <tr>
        <th>ID</th>
        <th>Tag&nbsp;Name</th>
        <th>Children&nbsp;(Sub-Tags)</th>
      </tr>
      {% for id, name, parents, depth in tags %}
        <tr>
          <td align='center'><a href='{% url "tag" id %}'>{{ id }}</a></td>
          {% if depth == page_depth %}
            <td>{{ name|escape }}</td>
            <td>&nbsp;</td>
          {% else %}
            <td>&nbsp;</td>
            <td>{{ parents|escape }}</td>
          {% endif %}
        </tr>
      {% empty %}
        <tr>
          <td colspan='3'>
            {% if tag_id %}
              No sub-tags at this level:
              create new below or <a href='{% url "tag" 0 %}'>go back to root</a>?
            {% else %}
              No tags in database: create new tags below?
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>

    <form action='{% url "tag" tag_id %}' method='post'>
      {% csrf_token %}

      <p>
        {% if tag_id %}
          Create a new child tag under <i>&quot;{{ tag_name|escape }}&quot;</i>
        {% else %}
          Create a new top-level tag
        {% endif %}
        named:&nbsp;&nbsp;<input type='text' name='named_child'/>&nbsp;&nbsp;<input type='submit' value='Create'>
      </p>

    </form>

    {% if tag_id %}

      {% if page_depth %}

        <p><a href='{% url "tag" page_depth_up %}'>(Go To: Up &#11014; One Level)</a></p>

      {% endif %}

      <p><a href='{% url "tag" 0 %}'>(Go To: Root Tags)</a></p>

    {% endif %}

    <p><a href='{% url "index" %}'>(Go To: Home Page)</a></p>

  </body>
</html>
